先看看百度图片的水平等高瀑布流效果：   

<img src="./asset/百度的效果.png" />

从图片中的样子，你应该知道什么叫水平等高瀑布流了吧。
* 每一行的图片都是等高的；
* 每一行的图片宽度是不等的；
* 垂直方向上不用对齐；

---
<br>



看看我们实现的效果：

<img src="./asset/我们的效果.png" />

<br>

1. 我们的实现中指定了每一行最多展示的图片数量;  
2. 只要每行的图片数量够，就按照最多的数量展示；  
3. 和百度版本的区别是，我们并没有指定图片高度，如果指定了图片的高度，
那么每一行展示的数量将由图片的宽度决定。


---

## 核心实现思路
1. 每一行图片的高度和宽度是用js计算的；  
   以每行最多展示4张图片为例，解释下思路
   * 计算4张图片总宽度，计算第一张图片宽度所占总宽度的比例；
   * 用这个比例乘我们制定的行总宽度，得到第一张图片在该行展示时的宽度；
   * 在修改宽高时，原图的宽高比不会变，因此使用宽高比计算第一张图片在本行的高度。
        > 为了避免宽高比太小，导致图片高度太大，可以另外设置默认宽高比。
   * 根据第一张图片的高度（也就是行高度），计算后边3张图片各自的宽度。
        > 1. 在某一张图片的时候，可能地方不够，塞不下了，此时要根据一定策略将前面的图片进行调整，也就是重新计算他们的宽度、高度，腾出地方来，把新的图片塞进去；  
        > 2. 最后一张图片放入行末尾之后，可能行末尾仍然有空间，如果空间不大的话（小于10px），视觉上没什么影响。但是如果空白很大，要根据一定策略对本行的所有图片重新计算宽高，把他们的宽度增加。
        > 3. 起初，采用的是等比缩放的策略，但是效果不好，对每行4张图片适用，切到5张图片就失效了；本例中采用的是线性缩放，每次增加1或者减少1，这个可以继续优化，因为目前是固定值1，后续优化可以修改为动态数值，加快计算过程；
   * 根据计算好的数据，使用js创建`img`元素，插入到文档中即可。
   * 每行图片之间的间距，行与行之间的距离，使用css控制。


具体实现的思路参考了https://www.jianshu.com/p/e6b37b7fff85，
感谢这个作者的经验分享。


---

## 运行代码并观察效果
* 安装typescript： `sudo npm install -g typescript`
* vscode上安装插件: `Live Server`
  
1. 编译代码 `tsc main.ts main.js -t es6`
2. 在`main.html`文件中右键，选择 `Open With Live Server`